<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Details Tree</title>
	</head>
	<body>
    <div id="document-tree"></div>
    
    <button id="button1">New Document</div>
    <button id="button2">Add Document</div>
  
  <script type='text/javascript' src='../../../../steal/steal.js'></script>
  <script type='text/javascript'>
      steal('jquery/dom/fixture', 'jquery/dom/route', 'docview/fixtures', 'docview/ui/details/tree').then(function ($) {
          // Client State
          var state = new $.Observe({
              category: "",
              id: "",
              page: "",
              search: {
                  ids: [],
                  filters: [6]
              },
              document: {
                  pages: [],
                  directory: "",
                  metadata: {},
                  groups: []
              }
          });

          $('#document-tree').docview_ui_details_tree({ clientState: state, details_controller: this });

          $('#button1').click(function () {
              var ctrl = $('div#document-tree').controller();

              var groups = new Array();
              var subgroup = new Array();
              var pages = new Array();
              var label = "A123123123123123123";
              pages.push("pic00001.jpg");
              subgroup.push("pic00001.jpg");
              pages.push("pic00002.jpg");
              subgroup.push("pic00002.jpg");
              groups.push({ type: 1, name: "单证首页", pages: subgroup });
              var directory = "/docview/ui/formatpdf/jpg/";
              var metadata = "123123123123123123";
              var currDoc = {
                  label: label,
                  pages: pages,
                  directory: directory,
                  metadata: metadata,
                  groups: groups
              };

              ctrl.addDocTree(currDoc, 1);
          });

          $('#button2').click(function () {
              var ctrl = $('div#document-tree').controller();

              var groups = new Array();
              var subgroup = new Array();
              var pages = new Array();
              var label = "B123123123123123123";
              pages.push("pic00003.jpg");
              subgroup.push("pic00003.jpg");
              pages.push("pic00004.jpg");
              subgroup.push("pic00004.jpg");
              groups.push({ type: 13, name: "删改单首页", pages: subgroup });
              var directory = "/docview/ui/formatpdf/jpg/";
              var metadata = "123123123123123123";
              var currDoc = {
                  label: label,
                  pages: pages,
                  directory: directory,
                  metadata: metadata,
                  groups: groups
              };

              ctrl.addDocTree(currDoc, 2);
          });
      });
  </script>
	</body>
</html>