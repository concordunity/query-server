<!DOCTYPE html>
<html lang="en">
	<head>
<meta charset="utf-8">
		<title>Details Tree</title>
	</head>
	<body>
    <div>
    <button id="button1">New Document</button>
    <button id="button2">Add Document</button>
    <button id="button3">Delete all</button>
    </div>
  
    <div id="document-tree"></div>
    
  <script type='text/javascript' src='../../../../steal/steal.js'></script>
  <script type='text/javascript'>
steal('jquery/dom/fixture', 'jquery/dom/route', 'docview/fixtures', 'docview/ui/details/document.js', 'docview/ui/details/tree').then(function ($) {
 $('#document-tree').docview_ui_details_tree();
 var ctrl =  $('#document-tree').controller();
var doc_index = 1;

function addDoc(txtValue) {
     var response = {"doc_info":
            {"checkedout":true,
             "created_at":"2012-03-21T13:19:34+08:00",
             "doc_id":"22012012101201001" + doc_index,
             "doc_source":null,"doc_type":null,"edc_date":"2012-03-21",
             "folder_id":3,"id":13,"inquired":false,"label":null,
             "modified":null,"org":"2218","org_applied":null,"pages":5,
             "phase":null,"serial_number":null,
             "updated_at":"2012-07-02T18:16:14+08:00","access_info":null},

             "directory":"/docimages","label":"220120121012010018",
             "special_doc_info": "",

              "image_info":{
                "T_blog":[{"FN":"pic000000.jpg","TCode":"0","T":"\u5355\u636e\u9996\u9875","V":"220120121012010018","BT":""},{"FN":"pic000001.jpg","TCode":"6","T":"\u51fa\u53e3\u62a5\u5173\u5355","V":"","BT":""},{"FN":"pic000002.jpg","TCode":"6","T":"\u51fa\u53e3\u62a5\u5173\u5355","V":"","BT":""},{"FN":"pic000003.jpg","TCode":"6","T":"\u51fa\u53e3\u62a5\u5173\u5355","V":"","BT":""},{"FN":"pic000004.jpg","TCode":"6","T":"\u51fa\u53e3\u62a5\u5173\u5355","V":"","BT":""},{"FN":"pic000005.jpg","TCode":"2","T":"\u53d1\u7968","V":"","BT":""}]}
			};


    var doc = new Document(response), "");
console.log(doc);
    ctrl.addDocTree(doc, doc_index++);

}


    // Client State
    var state = new $.Observe({
        category: "",
        id: "",
        page: "",
        search: {
            ids: [],
            filters: [6]
        },
        document: {
            pages: [],
            directory: "",
            metadata: {},
            groups: []
        }
    });

    $('#document-tree').docview_ui_details_tree({ clientState: state, details_controller: this });

    $('#button1').click(function () {
        addDoc("单证首页");

    });

    $('#button2').click(function () {
        addDoc("删改单首页");
    });

    $('#button3').click(function () {
        var ctrl = $('div#document-tree').controller();
        ctrl.clearDocTree();
    });

});
  </script>
	</body>
</html>
