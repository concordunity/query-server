<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- RD version: 0.9.5  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <title>Class: PrettyPrint (Ruby 1.9.2) </title>
  <!-- raw_prefix  = '.'   -->
  <link rel="stylesheet" href="css/obf.css" >

  <script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 
</head>

<body id="top" class="class">
<div id='actionbar' >
<div class='wrapper'>
<ul class='grids g0'>
  <li class='grid-2' ><a href='/' target='_top' >Home</a></li>
  <li class='grid-2' ><a href='/core' target='_top' >Core</a></li>
  <li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib</a></li>
  <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
  <li class='grid-7 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form>
</li>
</ul>
</div>
</div> <!-- end action bar -->
          <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="index.html">Home</a>
          <a href="index.html#classes">Classes</a>
          <a href="index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="prettyprint_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="prettyprint.rb">prettyprint.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="PrettyPrint/Breakable.html">PrettyPrint::Breakable</a></li>
          
          <li><span class="type">CLASS</span> <a href="PrettyPrint/Group.html">PrettyPrint::Group</a></li>
          
          <li><span class="type">CLASS</span> <a href="PrettyPrint/GroupQueue.html">PrettyPrint::GroupQueue</a></li>
          
          <li><span class="type">CLASS</span> <a href="PrettyPrint/SingleLine.html">PrettyPrint::SingleLine</a></li>
          
          <li><span class="type">CLASS</span> <a href="PrettyPrint/Text.html">PrettyPrint::Text</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-format">::format</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-singleline_format">::singleline_format</a></li>
          
          <li><a href="#method-i-break_outmost_groups">#break_outmost_groups</a></li>
          
          <li><a href="#method-i-breakable">#breakable</a></li>
          
          <li><a href="#method-i-current_group">#current_group</a></li>
          
          <li><a href="#method-i-fill_breakable">#fill_breakable</a></li>
          
          <li><a href="#method-i-first-3F">#first?</a></li>
          
          <li><a href="#method-i-flush">#flush</a></li>
          
          <li><a href="#method-i-group">#group</a></li>
          
          <li><a href="#method-i-group_sub">#group_sub</a></li>
          
          <li><a href="#method-i-nest">#nest</a></li>
          
          <li><a href="#method-i-text">#text</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="PrettyPrint.html">PrettyPrint</a></li>
        
          <li><a href="PrettyPrint/Breakable.html">PrettyPrint::Breakable</a></li>
        
          <li><a href="PrettyPrint/Group.html">PrettyPrint::Group</a></li>
        
          <li><a href="PrettyPrint/GroupQueue.html">PrettyPrint::GroupQueue</a></li>
        
          <li><a href="PrettyPrint/SingleLine.html">PrettyPrint::SingleLine</a></li>
        
          <li><a href="PrettyPrint/Text.html">PrettyPrint::Text</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">PrettyPrint</h1>

    <div id="description" class="description">
      
<p>This class implements a pretty printing algorithm. It finds line breaks and
nice indentations for grouped structure.</p>

<p>By default, the class assumes that primitive elements are strings and each
byte in the strings have single column in width. But it can be used for
other situations by giving suitable arguments for some methods:</p>
<ul><li>
<p>newline object and space generation block for <a
href="PrettyPrint.html#method-c-new">PrettyPrint.new</a></p>
</li><li>
<p>optional width argument for <a
href="PrettyPrint.html#method-i-text">PrettyPrint#text</a></p>
</li><li>
<p><a href="PrettyPrint.html#method-i-breakable">PrettyPrint#breakable</a></p>
</li></ul>

<p>There are several candidate uses:</p>
<ul><li>
<p>text formatting using proportional fonts</p>
</li><li>
<p>multibyte characters which has columns different to number of bytes</p>
</li><li>
<p>non-string formatting</p>
</li></ul>

<h2>Bugs</h2>
<ul><li>
<p>Box based formatting?</p>
</li><li>
<p>Other (better) model/algorithm?</p>
</li></ul>

<h2>References</h2>

<p>Christian Lindig, Strictly Pretty, March 2000, <a
href="http://www.st.cs.uni-sb.de/~lindig/papers/#pretty">www.st.cs.uni-sb.de/~lindig/papers/#pretty</a></p>

<p>Philip Wadler, A prettier printer, March 1998, <a
href="http://homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier">homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier</a></p>

<h2>Author</h2>

<p>Tanaka Akira &lt;akr@m17n.org&gt;</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="genspace-attribute-method" class="method-detail">
          <a name="genspace"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">genspace</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="group_queue-attribute-method" class="method-detail">
          <a name="group_queue"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">group_queue</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="indent-attribute-method" class="method-detail">
          <a name="indent"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">indent</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="maxwidth-attribute-method" class="method-detail">
          <a name="maxwidth"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">maxwidth</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="newline-attribute-method" class="method-detail">
          <a name="newline"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">newline</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="output-attribute-method" class="method-detail">
          <a name="output"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">output</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="format-method" class="method-detail ">
          <a name="method-c-format"></a>

          
          <div class="method-heading">
            <span class="method-name">format</span><span
              class="method-args">(output='', maxwidth=79, newline="\n", genspace=lambda {|n| ' ' * n})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This is a convenience method which is same as follows:</p>

<pre>begin
  q = PrettyPrint.new(output, maxwidth, newline, &amp;genspace)
  ...
  q.flush
  output
end</pre>
            

            
            <div class="method-source-code" id="format-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">output</span>=<span class="ruby-string">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-value">79</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-identifier">genspace</span>=<span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-string">' '</span> * <span class="ruby-identifier">n</span>})
  <span class="ruby-identifier">q</span> = <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">output</span>, <span class="ruby-identifier">maxwidth</span>, <span class="ruby-identifier">newline</span>, &amp;<span class="ruby-identifier">genspace</span>)
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">q</span>
  <span class="ruby-identifier">q</span>.<span class="ruby-identifier">flush</span>
  <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- format-source -->
            
          </div>

          

          
        </div><!-- format-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(output='', maxwidth=79, newline="\n", &genspace)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a buffer for pretty printing.</p>

<p><tt>output</tt> is an output target. If it is not specified, " is assumed.
It should have a &lt;&lt; method which accepts the first argument
<tt>obj</tt> of <a
href="PrettyPrint.html#method-i-text">PrettyPrint#text</a>, the first
argument <tt>sep</tt> of <a
href="PrettyPrint.html#method-i-breakable">PrettyPrint#breakable</a>, the
first argument <tt>newline</tt> of <a
href="PrettyPrint.html#method-c-new">PrettyPrint.new</a>, and the result of
a given block for <a
href="PrettyPrint.html#method-c-new">PrettyPrint.new</a>.</p>

<p><tt>maxwidth</tt> specifies maximum line length. If it is not specified, 79
is assumed. However actual outputs may overflow <tt>maxwidth</tt> if long
non-breakable texts are provided.</p>

<p><tt>newline</tt> is used for line breaks. "n" is used if it is not
specified.</p>

<p>The block is used to generate spaces. {|width| ‘ ’ * width} is used if it
is not given.</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">output</span>=<span class="ruby-string">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-value">79</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-string">&quot;\n&quot;</span>, &amp;<span class="ruby-identifier">genspace</span>)
  <span class="ruby-ivar">@output</span> = <span class="ruby-identifier">output</span>
  <span class="ruby-ivar">@maxwidth</span> = <span class="ruby-identifier">maxwidth</span>
  <span class="ruby-ivar">@newline</span> = <span class="ruby-identifier">newline</span>
  <span class="ruby-ivar">@genspace</span> = <span class="ruby-identifier">genspace</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-string">' '</span> * <span class="ruby-identifier">n</span>}

  <span class="ruby-ivar">@output_width</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@buffer</span> = []

  <span class="ruby-identifier">root_group</span> = <span class="ruby-constant">Group</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>)
  <span class="ruby-ivar">@group_stack</span> = [<span class="ruby-identifier">root_group</span>]
  <span class="ruby-ivar">@group_queue</span> = <span class="ruby-constant">GroupQueue</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root_group</span>)
  <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
        <div id="singleline_format-method" class="method-detail ">
          <a name="method-c-singleline_format"></a>

          
          <div class="method-heading">
            <span class="method-name">singleline_format</span><span
              class="method-args">(output='', maxwidth=nil, newline=nil, genspace=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This is similar to <a
href="PrettyPrint.html#method-c-format">PrettyPrint::format</a> but the
result has no breaks.</p>

<p><tt>maxwidth</tt>, <tt>newline</tt> and <tt>genspace</tt> are ignored.</p>

<p>The invocation of <tt>breakable</tt> in the block doesn’t break a line and
is treated as just an invocation of <tt>text</tt>.</p>
            

            
            <div class="method-source-code" id="singleline_format-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">singleline_format</span>(<span class="ruby-identifier">output</span>=<span class="ruby-string">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">genspace</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">q</span> = <span class="ruby-constant">SingleLine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">output</span>)
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">q</span>
  <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- singleline_format-source -->
            
          </div>

          

          
        </div><!-- singleline_format-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="break_outmost_groups-method" class="method-detail ">
          <a name="method-i-break_outmost_groups"></a>

          
          <div class="method-heading">
            <span class="method-name">break_outmost_groups</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="break_outmost_groups-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 122</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">break_outmost_groups</span>
  <span class="ruby-keyword">while</span> <span class="ruby-ivar">@maxwidth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@output_width</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@buffer_width</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">group</span> = <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">deq</span>
    <span class="ruby-keyword">until</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">breakables</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">data</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">shift</span>
      <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
      <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">width</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Text</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">first</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">shift</span>
      <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
      <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">width</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- break_outmost_groups-source -->
            
          </div>

          

          
        </div><!-- break_outmost_groups-method -->

      
        <div id="breakable-method" class="method-detail ">
          <a name="method-i-breakable"></a>

          
          <div class="method-heading">
            <span class="method-name">breakable</span><span
              class="method-args">(sep=' ', width=sep.length)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This tells “you can break a line here if necessary”, and a
<tt>width</tt>-column text <tt>sep</tt> is inserted if a line is not broken
at the point.</p>

<p>If <tt>sep</tt> is not specified, “ ” is used.</p>

<p>If <tt>width</tt> is not specified, <tt>sep.length</tt> is used. You will
have to specify this when <tt>sep</tt> is a multibyte character, for
example.</p>
            

            
            <div class="method-source-code" id="breakable-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">breakable</span>(<span class="ruby-identifier">sep</span>=<span class="ruby-string">' '</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">sep</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">group</span> = <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">break?</span>
    <span class="ruby-identifier">flush</span>
    <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@newline</span>
    <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@genspace</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-ivar">@output_width</span> = <span class="ruby-ivar">@indent</span>
    <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Breakable</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sep</span>, <span class="ruby-identifier">width</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
    <span class="ruby-identifier">break_outmost_groups</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- breakable-source -->
            
          </div>

          

          
        </div><!-- breakable-method -->

      
        <div id="current_group-method" class="method-detail ">
          <a name="method-i-current_group"></a>

          
          <div class="method-heading">
            <span class="method-name">current_group</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="current_group-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_group</span>
  <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- current_group-source -->
            
          </div>

          

          
        </div><!-- current_group-method -->

      
        <div id="fill_breakable-method" class="method-detail ">
          <a name="method-i-fill_breakable"></a>

          
          <div class="method-heading">
            <span class="method-name">fill_breakable</span><span
              class="method-args">(sep=' ', width=sep.length)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="fill_breakable-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 158</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fill_breakable</span>(<span class="ruby-identifier">sep</span>=<span class="ruby-string">' '</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">sep</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">group</span> { <span class="ruby-identifier">breakable</span> <span class="ruby-identifier">sep</span>, <span class="ruby-identifier">width</span> }
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- fill_breakable-source -->
            
          </div>

          

          
        </div><!-- fill_breakable-method -->

      
        <div id="first-3F-method" class="method-detail ">
          <a name="method-i-first-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">first?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>first? is a predicate to test the call is a first call to first? with
current group.</p>

<p>It is useful to format comma separated values as:</p>

<pre>q.group(1, '[', ']') {
  xxx.each {|yyy|
    unless q.first?
      q.text ','
      q.breakable
    end
    ... pretty printing yyy ...
  }
}</pre>

<p>first? is obsoleted in 1.8.2.</p>
            

            
            <div class="method-source-code" id="first-3F-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first?</span>
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;PrettyPrint#first? is obsoleted at 1.8.2.&quot;</span>
  <span class="ruby-identifier">current_group</span>.<span class="ruby-identifier">first?</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- first-3F-source -->
            
          </div>

          

          
        </div><!-- first-3F-method -->

      
        <div id="flush-method" class="method-detail ">
          <a name="method-i-flush"></a>

          
          <div class="method-heading">
            <span class="method-name">flush</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>outputs buffered data.</p>
            

            
            <div class="method-source-code" id="flush-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 233</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">flush</span>
  <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
  }
  <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- flush-source -->
            
          </div>

          

          
        </div><!-- flush-method -->

      
        <div id="group-method" class="method-detail ">
          <a name="method-i-group"></a>

          
          <div class="method-heading">
            <span class="method-name">group</span><span
              class="method-args">(indent=0, open_obj='', close_obj='', open_width=open_obj.length, close_width=close_obj.length)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Groups line break hints added in the block. The line break hints are all to
be used or not.</p>

<p>If <tt>indent</tt> is specified, the method call is regarded as nested by
nest(indent) { … }.</p>

<p>If <tt>open_obj</tt> is specified, <tt>text open_obj, open_width</tt> is
called before grouping. If <tt>close_obj</tt> is specified, <tt>text
close_obj, close_width</tt> is called after grouping.</p>
            

            
            <div class="method-source-code" id="group-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group</span>(<span class="ruby-identifier">indent</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">open_obj</span>=<span class="ruby-string">''</span>, <span class="ruby-identifier">close_obj</span>=<span class="ruby-string">''</span>, <span class="ruby-identifier">open_width</span>=<span class="ruby-identifier">open_obj</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">close_width</span>=<span class="ruby-identifier">close_obj</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">text</span> <span class="ruby-identifier">open_obj</span>, <span class="ruby-identifier">open_width</span>
  <span class="ruby-identifier">group_sub</span> {
    <span class="ruby-identifier">nest</span>(<span class="ruby-identifier">indent</span>) {
      <span class="ruby-keyword">yield</span>
    }
  }
  <span class="ruby-identifier">text</span> <span class="ruby-identifier">close_obj</span>, <span class="ruby-identifier">close_width</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- group-source -->
            
          </div>

          

          
        </div><!-- group-method -->

      
        <div id="group_sub-method" class="method-detail ">
          <a name="method-i-group_sub"></a>

          
          <div class="method-heading">
            <span class="method-name">group_sub</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="group_sub-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_sub</span>
  <span class="ruby-identifier">group</span> = <span class="ruby-constant">Group</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">depth</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">group</span>
  <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">enq</span> <span class="ruby-identifier">group</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">pop</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">breakables</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">group</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- group_sub-source -->
            
          </div>

          

          
        </div><!-- group_sub-method -->

      
        <div id="nest-method" class="method-detail ">
          <a name="method-i-nest"></a>

          
          <div class="method-heading">
            <span class="method-name">nest</span><span
              class="method-args">(indent)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Increases left margin after newline with <tt>indent</tt> for line breaks
added in the block.</p>
            

            
            <div class="method-source-code" id="nest-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nest</span>(<span class="ruby-identifier">indent</span>)
  <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">indent</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">indent</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- nest-source -->
            
          </div>

          

          
        </div><!-- nest-method -->

      
        <div id="text-method" class="method-detail ">
          <a name="method-i-text"></a>

          
          <div class="method-heading">
            <span class="method-name">text</span><span
              class="method-args">(obj, width=obj.length)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This adds <tt>obj</tt> as a text of <tt>width</tt> columns in width.</p>

<p>If <tt>width</tt> is not specified, obj.length is used.</p>
            

            
            <div class="method-source-code" id="text-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File prettyprint.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">obj</span>
    <span class="ruby-ivar">@output_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">last</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">Text</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">text</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">text</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">text</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">width</span>)
    <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
    <span class="ruby-identifier">break_outmost_groups</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- text-source -->
            
          </div>

          

          
        </div><!-- text-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
 <div class='info'>
  <p>Commenting is here to help enhance the documentation.  For example, sample code, or clarification of the documentation.</p>
  <p>If you have questions about Ruby or the documentation, please post to one of the <a href='http://www.ruby-lang.org/en/community/mailing-lists/'>Ruby mailing lists</a>.  You will get better, faster, help that way.</p>
  <p>If you wish to post a correction of the docs, please do so, but also <a href='http://bugs.ruby-lang.org/projects/ruby/wiki/HowtoReport' >file bug report</a> so that it can be corrected for the next release. Thank you.</p>
  </div>

  </div><!-- documentation -->
 
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 
    
    var disqus_developer = true; // DEBUGGERY
    


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.2</small></p> 
  
   <p> <a href="http://www.ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, an <a href="http://www.neurogami.com"> avant garage application development company in Scottsdale, AZ</a>.  </p>
 
    <p><small>Generated with the <a href="http://neurogami.com/code/">Ruby-doc Rdoc Generator</a> 0.9.5</small>.</p>
  </div>

</div>

<script type="text/javascript">
var _uacct = "UA-335317-2";
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{ 
var pageTracker = _gat._getTracker(_uacct);
pageTracker._trackPageview();
} catch(err) {} 
</script>
</body>
</html>

